{{!< default}}

{{#tag}}
<header class="site-archive-header">
    {{> site-header}}
    {{> header-background background=feature_image}} {{!--Special header-image.hbs partial to generate the background image--}}
        <div class="inner site-header-content">
            <h1 class="site-title">Portfolio d'investissement</h1>
            <h2 class="site-description">
                Voici la liste complète des sociétés dans lesquels j'ai investi, que ce soit via une création directe où je suis cofondateur, via mon activité de business angel, ou via l'émission elle même.
            </h2>
        </div>
    </div>
</header>
{{/tag}}

<main>
    <div class="portfolio-navigation">
        <div id="filters" class="button-group">
            <button class="btn is-checked" data-filter="*">Tout</button>
            <button class="btn" data-filter=".qvema">Qui veut être mon associé ?</button>
            <button class="btn" data-filter=".cofounder">Cofondateur</button>
            <button class="btn" data-filter=".ba">Business Angel</button>
        </div>
    </div>

    <div class="grid">
        {{#get "pages" limit="all" include="tags" filter="tag:portfolio"}}
            {{#foreach pages}}
                <a href="/{{slug}}" class="{{tags separator=" " autolink="false"}}">
                    <div class="portfolio-thumb"></div>
                    <h2 class="name">{{title}}</h2>
                    <span class="investment" id="{{id}}-1"></span>
                    <span class="capital" id="{{id}}-2"></span>
                    <script>
                      document.getElementById("{{id}}-1").innerHTML = "{{excerpt}}".split(',')[0];
                      document.getElementById("{{id}}-2").innerHTML = "{{excerpt}}".split(',')[1];
                    </script>
                </a>
            {{/foreach}}
        {{/get}}
    </div>
</main>

{{#contentFor "scripts"}}
<script>
    // init Isotope

    var $grid = $('.grid').isotope({
      itemSelector: '.portfolio',
      percentPosition: true,
      masonry: {
        columnWidth: 200
      }
    });

    // bind filter button click
    $('#filters').on('click', 'button', function() {
        var filterValue = $(this).attr('data-filter');
        $grid.isotope({ filter: filterValue });
    });

    // change is-checked class on buttons
    $('.button-group').each( function(i, buttonGroup) {
        var $buttonGroup = $(buttonGroup);
        $buttonGroup.on('click', 'button', function() {
            $buttonGroup.find('.is-checked').removeClass('is-checked');
            $(this).addClass('is-checked');
        });
    });
</script>
{{/contentFor}}
